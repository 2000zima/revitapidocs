{% extends "base.html" %}

{% block header %}
    <title>Revit API Docs - Python</title>
{% endblock %}

{% block content %}
<div class="col-sm-12 col-md-12 col-lg-12" id="content-full-width">
<h4>Python + Revit API <span class="text-muted small"> BETA</span></h4>
<hr />
<p class="small">As the official documentation lacks Python coverage, I thought it would be helpful to include some examples and snippets alongside it.</p>
<p class="small">The code below should work with <a href="https://github.com/architecture-building-systems/revitpythonshell">RevitPythonShell</a>
and <a href="https://github.com/eirannejad/pyRevit">pyRevit</a>, but can be also be used within Dynamo with minor tweaks.</p>
<p class="small">For a more comprehensive set of examples of Python interacting with the Revit API, check out the <a href="https://github.com/eirannejad/pyRevit">pyRevit Repository</a>,
<a href="https://daren-thomas.gitbooks.io/scripting-autodesk-revit-with-revitpythonshell/content/deploying_rpsaddins/what_is_a_rpsaddin.html">Revit Python Shell Git Book</a>,
or some of the links in the <a href="/">main page.</a></p>
<p class="small">Code is hosted on <a href="https://gist.github.com/gtalarico/">gist.github.com</a>.</p>

<br />
<!-- <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Share</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> -->
<!-- <a href="http://twitter.com/intent/tweet?text=Check out &url=http://www.RevitAPIdocs.com/python/&hashtags=revitapi"><img src="{{ url_for('static', filename="img/tweet-bw.png") }}" alt="Tweet" /></a> -->
    {% if 'error' in gists_categories.keys() %}
    <div class="panel panel-danger margin-top ">
      <div class="panel-heading">Damn</div>
        <div class="panel-body">
        <p>Something went wrong requesting the latest code snippets.</p>
        <p>While we get this sorted out, you can access the same code directly on <a href="https://gist.github.com/gtalarico/">github</a>.</p>
        <p class="small text-muted">Error Code: {{ gists_categories.error }}</p>
      </div>
    </div>


    {% else %}
    <div class="row"> <!--  ROW -->
        {% for category, gists in gists_categories.items() %}
        <div class="col-sm-12 col-md-6 col-lg-6">
            <br/>
            <h4>{{ category }}</h4>
            <hr />
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    {% set cat_loop = loop.index %}
                    {% for gist in gists|sort(attribute='name') %}
                      <div class="panel panel-default" id="{{ gist.id }}">
                        <div class="panel-heading" role="button" id="heading{{cat_loop}}-{{loop.index}}"  data-toggle="collapse" data-parent="#accordion" href="#collapse{{cat_loop}}-{{loop.index}}" aria-expanded="true" aria-controls="collapse{{cat_loop}}-{{loop.index}}">
                          <h5 class="panel-title">
                              {{ gist.name }}
                          </h5>
                        </div>
                        <div id="collapse{{cat_loop}}-{{loop.index}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{{cat_loop}}-{{loop.index}}">
                          <div class="panel-body gist-panel">
                            <script src="{{gist.url}}"></script>
                          </div>
                        </div>
                      </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div> <!--  ROW -->
    {% endif %}

    <!-- START API-PYTHON ADSENSE -->
    <div id="adsense-responsive">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- RevitAPIDocs-API-Responsive -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2370986191740757"
             data-ad-slot="6712583026"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <!-- END ADSENSE -->

    <!-- DISQUS -->
    {% include 'disqus.html' %}
    <!-- DISQUS -->
</div>

{% endblock %}

{% block script %}
<script>

$('.panel-heading').on('click', function(event){
    var gist_id = $(this).parent().attr('id')
    ga('send', 'pageview', '/python/#' + gist_id);
    history.pushState(null, null, '#' + gist_id);
})

function check_panel_url(){
  var panelId = getUrlState() // Returns anything after a # sign
  if(panelId) {
      console.log('Has Panel:' + panelId)
      $('#'+panelId).children('.panel-collapse').collapse('show')
  }
};

$(document).ready(function() {
    check_panel_url()
});

</script>
{% endblock %}
