{% extends "base.html" %}

<!-- Rendered tempaltes must include header() macro#} -->
{% from '%s' % content import header %}
{% block header %}
    {{ header() }}
{% endblock %}

{% block content %}

    <div class="col-sm-12 col-md-4 col-lg-3" id="sidebar">

        <span id="menu-loading" class="small text-muted"><img src="{{ url_for('static', filename="img/loader.gif") }}">
        &nbsp;Loading</span>

        {# Add menu for the correct year #}
        {% include '%s' % ns_template with context %}

        {# Add Google Search Box #}
        {% include 'google_search.html' %}

    </div>

    <div class="col-sm-12 col-md-8 col-lg-9" id="main">
        {% if active_ul and available_in%}
            <div id='alsofor'>
                <p class="small"><small>
                    API VERSIONS |
                    {% for year in available_in %}
                    <a href="/{{year}}/{{active_ul}}"> {{year}} </a>
                    {% endfor %}
                </small></p>
            </div>
        {%endif%}

        {% include '%s' % content %}
        <hr />
        {# <div class="comment-bar">#}
        {% include 'disqus.html' %}
        {# </div>#}
    </div>

{% endblock %}

{% block script %}
    {# This script is added here because it usus the active_ul variable#}
    <script>
    $( document ).ready(function() {
        var active_ul = "{{active_ul}}";
        var active_ul_tag = $('a[href$="{{active_ul}}"]');

        active_ul_tag.parentsUntil('ul.Collapsible', 'ul').each(function(){
            // console.log(this)
            $(this).show();
            $(this).children('li').toggleClass("open closed");
            // $(this).children('li').css('font-weight','bold');
            $(this).parents('li').toggleClass("active");
            // $(this).css('font-weight','bold');
            $(this).siblings('ul').show(); // Revel Syster  ULs
        });

        active_ul_tag.parents('li').toggleClass("open closed");
        active_ul_tag.parents('li').toggleClass("active");
    });
    </script>

{% endblock %}
